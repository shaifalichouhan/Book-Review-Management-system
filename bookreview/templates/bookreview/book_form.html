{% extends 'bookreview/base.html' %}

{% block title %}Add New Book - Book Review System{% endblock %}

{% block content %}
<!-- Back Button -->
<div class="row mb-3">
    <div class="col-md-12">
        <a href="{% url 'book_list' %}" class="btn btn-outline-light">
            <i class="bi bi-arrow-left"></i> Back to Books
        </a>
    </div>
</div>

<!-- Add Book Form -->
<div class="row">
    <div class="col-md-8 mx-auto">
        <div class="card">
            <div class="card-body p-5">
                <h2 class="text-center fw-bold mb-4">
                    <i class="bi bi-plus-circle text-primary"></i> Add New Book
                </h2>
                <p class="text-center text-muted mb-4">Fill in the details to add a new book to the collection</p>
                
                <form method="post">
                    {% csrf_token %}
                    
                    <!-- Basic Information -->
                    <div class="mb-4">
                        <h5 class="fw-bold text-primary mb-3">
                            <i class="bi bi-info-circle"></i> Basic Information
                        </h5>
                        
                        <div class="mb-3">
                            <label class="form-label fw-bold">Book Title *</label>
                            <input type="text" name="title" class="form-control form-control-lg" 
                                   placeholder="Enter book title" required>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label fw-bold">Author *</label>
                            <select name="author" class="form-select form-select-lg" required>
                                <option value="">Choose an author...</option>
                                {% for author in authors %}
                                <option value="{{ author.id }}">{{ author.name }}</option>
                                {% endfor %}
                            </select>
                            <div class="form-text">
                                Don't see the author? <a href="/admin/bookreview/author/add/" target="_blank">Add new author in admin</a>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label fw-bold">Category *</label>
                            <select name="category" class="form-select form-select-lg" required>
                                <option value="">Choose a category...</option>
                                {% for value, label in categories %}
                                <option value="{{ value }}">{{ label }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    
                    <!-- Publication Details -->
                    <div class="mb-4">
                        <h5 class="fw-bold text-primary mb-3">
                            <i class="bi bi-book"></i> Publication Details
                        </h5>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label fw-bold">ISBN *</label>
                                <input type="text" name="isbn" class="form-control" 
                                       placeholder="e.g., 9780747532699" maxlength="13" required>
                                <div class="form-text">13-digit ISBN number</div>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label class="form-label fw-bold">Published Date *</label>
                                <input type="date" name="published_date" class="form-control" required>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Rating -->
                    <div class="mb-4">
                        <h5 class="fw-bold text-primary mb-3">
                            <i class="bi bi-star"></i> Rating
                        </h5>
                        
                        <div class="mb-3">
                            <label class="form-label fw-bold">Initial Rating</label>
                            <select name="rating" class="form-select">
                                <option value="0">No rating yet</option>
                                <option value="1">⭐ 1.0</option>
                                <option value="1.5">⭐ 1.5</option>
                                <option value="2">⭐⭐ 2.0</option>
                                <option value="2.5">⭐⭐ 2.5</option>
                                <option value="3">⭐⭐⭐ 3.0</option>
                                <option value="3.5">⭐⭐⭐ 3.5</option>
                                <option value="4">⭐⭐⭐⭐ 4.0</option>
                                <option value="4.5">⭐⭐⭐⭐ 4.5</option>
                                <option value="5">⭐⭐⭐⭐⭐ 5.0</option>
                            </select>
                            <div class="form-text">You can update this later</div>
                        </div>
                    </div>
                    
                    <!-- Submit Buttons -->
                    <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
                        <button type="submit" class="btn btn-primary btn-lg px-5">
                            <i class="bi bi-check-circle"></i> Add Book
                        </button>
                        <a href="{% url 'book_list' %}" class="btn btn-outline-secondary btn-lg px-5">
                            <i class="bi bi-x-circle"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Info Box -->
<div class="row mt-4">
    <div class="col-md-8 mx-auto">
        <div class="alert alert-info">
            <i class="bi bi-info-circle-fill"></i>
            <strong>Tip:</strong> After adding a book, you can add reviews from the book detail page or manage everything through the 
            <a href="/admin/" class="alert-link">admin panel</a>.
        </div>
    </div>
</div>
{% endblock %}